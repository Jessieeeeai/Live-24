# 🚀 快速开始指南

## 5 分钟启动加密大漂亮

### 第 1 步：检查环境

运行测试脚本：
```bash
python3 test_functionality.py
```

如果所有测试通过，继续下一步。

### 第 2 步：准备 API 密钥

你需要以下 API 密钥：

1. **DeepSeek API Key**
   - 访问：https://platform.deepseek.com
   - 注册并获取 API Key
   - 费用：非常便宜（约 ¥0.001/千字）

2. **Tavily API Key**
   - 访问：https://tavily.com
   - 注册并获取 API Key
   - 有免费额度（每月 1000 次搜索）

3. **YouTube 推流码**（仅直播模式需要）
   - 登录 YouTube Studio
   - 创建直播 → 获取推流码（形如：xxxx-xxxx-xxxx-xxxx）

### 第 3 步：准备背景视频

1. 准备一个 MP4 格式的循环背景视频
2. 推荐：赛博朋克风格、城市夜景、抽象动画
3. 分辨率：1920x1080 或 1280x720
4. 时长：10-60 秒（会自动循环）

可以从以下网站下载：
- Pexels Videos (免费)
- Pixabay Videos (免费)
- Videvo (免费)

### 第 4 步：启动应用

```bash
./start.sh
```

或者：
```bash
streamlit run app.py
```

浏览器会自动打开，或手动访问：http://localhost:8501

### 第 5 步：配置系统

在侧边栏填入：

1. **核心密钥**
   - DeepSeek Key: `sk-xxxxxxxxxxxx`
   - Tavily Key: `tvly-xxxxxxxxxxxx`
   - YouTube 推流码: `xxxx-xxxx-xxxx-xxxx`（直播模式）

2. **信息源控制**
   ```
   coindesk.com, theblock.co, cointelegraph.com, decrypt.co
   ```

3. **监控关键词**
   ```
   Bitcoin, Ethereum, Solana, AI Agent
   ```

4. **上传背景视频**
   - 点击 "📺 直播背景 (MP4)"
   - 选择你的视频文件

### 第 6 步：试听测试

1. 选择运行模式：**🛠️ 试听 (生成预览视频)**
2. 点击 **🚀 启动系统**
3. 等待生成（约 20-40 秒）
4. 在网页上预览视频效果
5. 检查：
   - ✅ 语音是否自然流畅
   - ✅ 字幕是否与语音同步
   - ✅ 字幕是否清晰可读
   - ✅ 内容是否有深度

### 第 7 步：正式直播（可选）

1. 确保 YouTube 直播已开启
2. 选择运行模式：**📡 直播 (24H无限循环)**
3. 调整策略设置：
   - 轮播间隔：120 秒（推荐）
   - 老视频概率：30%
4. 点击 **🚀 启动系统**
5. 系统会自动：
   - 搜索最新新闻
   - 生成深度分析
   - 合成语音字幕
   - 推流到 YouTube
   - 循环往复

## 🎯 核心功能说明

### 试听模式 vs 直播模式

| 功能 | 试听模式 | 直播模式 |
|------|---------|---------|
| 生成内容 | ✅ 一次 | ✅ 无限循环 |
| 网页预览 | ✅ | ❌ |
| YouTube推流 | ❌ | ✅ |
| 需要推流码 | ❌ | ✅ |
| 自动重试 | ❌ | ✅ |

### 内容来源优先级

1. **最新新闻**（24小时内）
   - 来自指定信源
   - 自动去重（5小时内不重复）
   
2. **备用话题库**
   - 无新闻时使用
   - 在 CMS 标签页管理
   
3. **历史视频插播**
   - 放在 `archive_videos/` 文件夹
   - 按概率随机播放

## 🛠️ 常见问题

### Q1: 字幕还是不同步？
确保：
1. FFprobe 已安装（`which ffprobe`）
2. 音频文件生成成功
3. 查看日志中的"实际语速"参数

### Q2: 推流失败？
检查：
1. 推流码是否正确
2. YouTube 直播是否已开启
3. 网络连接是否正常
4. 查看 FFmpeg 错误日志

### Q3: 内容重复？
系统有 5 小时去重机制，如果仍重复：
1. 检查 `topic_history.json` 是否存在
2. 手动删除该文件重置历史
3. 增加搜索结果数量

### Q4: 没有搜索到新闻？
可能原因：
1. 指定的信源没有新内容
2. 关键词太具体
3. Tavily API 额度不足

解决方案：
1. 留空信源（搜索全网）
2. 使用更广泛的关键词
3. 检查 Tavily 账户

### Q5: TTS 语音不自然？
当前使用的是 EdgeTTS 的晓晓音色，已经是最自然的中文女声。
如需调整：
1. 修改 `stream_engine.py` 中的音色代码
2. 可选音色：XiaoyiNeural, YunxiNeural 等

## 📊 性能参考

**标准配置下**：
- 单条内容生成：30-60 秒
- TTS 合成：5-10 秒
- 字幕生成：< 1 秒
- 视频合成：10-30 秒
- 推流延迟：实时

**资源占用**：
- 内存：500MB - 1GB
- CPU：视频编码时较高
- 网络：上行 3-5 Mbps（推流时）

## 🎨 自定义配置

### 修改字幕样式

编辑 `stream_engine.py`：
```python
style = "Fontsize=20,MarginV=50,..."
```

### 调整 AI 温度

编辑 `logic_core.py`：
```python
temperature=1.5  # 更有创意
```

### 修改搜索范围

在 UI 中调整信息源和关键词。

## 📞 获取帮助

遇到问题？
1. 查看 `README.md` 详细文档
2. 运行 `python3 test_functionality.py` 诊断
3. 查看日志输出
4. 提交 Issue

---

**祝你直播顺利！🎉**
